# Synthetic Data Kit Configuration
# HR Persona Bangladesh - Labour Act QA Dataset Generation

# LLM Provider Configuration
# Options: "vllm", "api-endpoint", "ollama"
# NOTE: Using "vllm" provider but pointing to Ollama endpoint (workaround for synthetic-data-kit bug)
llm:
  provider: "vllm"

# Ollama Configuration (for local LLM)
# NOTE: We use vLLM provider but configure it to use Ollama's endpoint
ollama:
  api_base: "http://localhost:11434/v1"
  model: "llama3.2:3b-instruct-q4_K_M"
  # Alternative models:
  # model: "llama3.3:70b-instruct-q4_K_M"  # Better quality, requires more VRAM
  # model: "qwen2.5:7b-instruct"
  sleep_time: 0.1

# vLLM Configuration (configured to use Ollama endpoint)
vllm:
  api_base: "http://localhost:11434/v1"
  model: "llama3.2:3b-instruct-q4_K_M"
  sleep_time: 0.1
  max_tokens: 2048
  timeout: 120
  temperature: 0.7
  top_p: 0.9

# API Endpoint Configuration (for external APIs like OpenAI, Llama API)
api-endpoint:
  api_base: "https://api.openai.com/v1"
  api_key: "${OPENAI_API_KEY}"  # Set via environment variable
  model: "gpt-4o-mini"
  max_retries: 3
  sleep_time: 0.5

# Generation Settings
generation:
  temperature: 0.7
  chunk_size: 4000
  chunk_overlap: 200
  num_pairs: 50  # Per chunk, will generate more across all chunks
  max_context_length: 8000
  max_tokens: 2048  # Maximum tokens for response
  top_p: 0.9
  frequency_penalty: 0.0
  presence_penalty: 0.0

# Curation Settings
curate:
  threshold: 7.0  # Quality score threshold (1-10)
  batch_size: 8

# Output Paths
paths:
  input_dir: "data/input"
  parsed_dir: "data/parsed"
  generated_dir: "data/generated"
  curated_dir: "data/curated"
  final_dir: "data/final"

# Custom Prompts for Bangladesh Labour Act
prompts:
  summary: |
    You are analyzing a legal document about Bangladesh Labour Law.
    
    Read the following text and provide a brief 2-3 sentence summary of the main topics covered.
    Focus on identifying the key themes, sections, and subject matter.
    
    Text:
    {text}
    
    Provide a concise summary:

  qa_generation: |
    You are an expert in Bangladesh Labour Law and HR practices. You are creating question-answer pairs for training an HR assistant chatbot.
    
    Focus on:
    - Labour rights and worker protections
    - Employment contracts and termination procedures
    - Wages, benefits, and leave policies
    - Workplace safety and health regulations
    - Trade unions and collective bargaining
    - Dispute resolution mechanisms
    - Specific provisions of the Bangladesh Labour Act 2006
    
    Below is a chunk of text from the Bangladesh Labour Act:
    
    {text}
    
    Create {num_pairs} high-quality question-answer pairs based ONLY on this text.
    
    Requirements:
    - Questions should be practical and relevant to HR professionals in Bangladesh
    - Answers should be accurate and cite specific sections when applicable
    - Include both simple factual questions and complex scenario-based questions
    - Use professional language appropriate for workplace context
    
    Return ONLY valid JSON formatted as:
    [
      {{
        "question": "Clear question about labour law or HR practice?",
        "answer": "Accurate answer based on the Bangladesh Labour Act."
      }},
      ...
    ]

  curation: |
    You are evaluating question-answer pairs about Bangladesh Labour Law for training an HR chatbot.
    
    Rate each QA pair on a scale of 1-10 based on:
    - Accuracy: Is the answer factually correct based on Bangladesh Labour Act?
    - Clarity: Is the question clear and the answer understandable?
    - Relevance: Is this useful for HR professionals in Bangladesh?
    - Completeness: Does the answer fully address the question?
    
    Return a JSON object with "score" (1-10) and "reason" for each pair.
